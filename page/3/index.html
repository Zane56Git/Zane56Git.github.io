<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.2">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Mist","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="不知生活，何来人生">
<meta property="og:type" content="website">
<meta property="og:title" content="Zane’s Space">
<meta property="og:url" content="http://example.com/page/3/index.html">
<meta property="og:site_name" content="Zane’s Space">
<meta property="og:description" content="不知生活，何来人生">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="Zane">
<meta property="article:tag" content="CZT">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/3/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>Zane’s Space</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Zane’s Space</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">this is zane’s zone</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-sitemap">

    <a href="/sitemap.xml" rel="section"><i class="fa fa-sitemap fa-fw"></i>站点地图</a>

  </li>
        <li class="menu-item menu-item-commonweal">

    <a href="/404/" rel="section"><i class="fa fa-heartbeat fa-fw"></i>公益 404</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/29/flink_space/flink%E5%BC%80%E5%8F%91-%20FlinkCDC/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/29/flink_space/flink%E5%BC%80%E5%8F%91-%20FlinkCDC/" class="post-title-link" itemprop="url">flink开发- FlinkCDC</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-29 20:28:16" itemprop="dateCreated datePublished" datetime="2021-08-29T20:28:16+08:00">2021-08-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/08/29/flink_space/flink%E5%BC%80%E5%8F%91-%20FlinkCDC/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/08/29/flink_space/flink%E5%BC%80%E5%8F%91-%20FlinkCDC/" class="cy_cmt_count" data-xid="2021/08/29/flink_space/flink开发- FlinkCDC/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>任何语言以简单快速的方式搭建，由浅到深去学习，循序渐进，最后以高阶方案实践。</p>
<p>基于查询和binlog2种方式</p>
<p>![image-20220523190449784](flink开发- FlinkCDC.assets/image-20220523190449784-3303891.png)</p>
<ul>
<li>2020 年 7 月由云邪提交了第一个 commit，这是基于个人兴趣孵化的项目；</li>
<li>2020 年 7 中旬支持了 MySQL-CDC；</li>
<li>2020 年 7 月末支持了 Postgres-CDC；</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://baijiahao.baidu.com/s?id=1708018647118048692&amp;wfr=spider&amp;for=pc">https://baijiahao.baidu.com/s?id=1708018647118048692&amp;wfr=spider&amp;for=pc</a></p>
<p>官方文档：</p>
<p><a target="_blank" rel="noopener" href="https://ververica.github.io/flink-cdc-connectors/">https://ververica.github.io/flink-cdc-connectors/</a></p>
<p><a target="_blank" rel="noopener" href="https://ververica.github.io/flink-cdc-connectors/master/">https://ververica.github.io/flink-cdc-connectors/master/</a></p>
<p>![image-20220523162534979](flink开发- FlinkCDC.assets/image-20220523162534979-3294337.png)</p>
<p>![image-20220523163032792](flink开发- FlinkCDC.assets/image-20220523163032792-3294634.png)</p>
<p>![image-20220523163313397](flink开发- FlinkCDC.assets/image-20220523163313397-3294795.png)</p>
<h1 id="数据采集之Flink-CDC实战"><a href="#数据采集之Flink-CDC实战" class="headerlink" title="数据采集之Flink CDC实战"></a>数据采集之Flink CDC实战</h1><p>![image-20220523163405012](flink开发- FlinkCDC.assets/image-20220523163405012-3294846.png)</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/08/%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8C%BA%E5%9D%97%E9%93%BE/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/08/%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8C%BA%E5%9D%97%E9%93%BE/" class="post-title-link" itemprop="url">区块链</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-08 20:18:18" itemprop="dateCreated datePublished" datetime="2021-08-08T20:18:18+08:00">2021-08-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/IT/" itemprop="url" rel="index"><span itemprop="name">IT</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/08/08/%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8C%BA%E5%9D%97%E9%93%BE/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/08/08/%E6%8E%A2%E7%B4%A2%E4%B9%8B%E5%8C%BA%E5%9D%97%E9%93%BE/" class="cy_cmt_count" data-xid="2021/08/08/探索之区块链/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="区块链概述"><a href="#区块链概述" class="headerlink" title="区块链概述"></a>区块链概述</h1><p>区块链是一个<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E4%BF%A1%E6%81%AF%E6%8A%80%E6%9C%AF/138928">信息技术</a>领域的术语。从本质上讲，它是一个共享数据库，存储于其中的数据或信息，具有“不可伪造”“全程留痕”“可以追溯”“公开透明”“集体维护”等特征。</p>
<p>区块链起源于<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E6%AF%94%E7%89%B9%E5%B8%81/4143690">比特币</a></p>
<p>区块链是加密货币背后的技术，是当下与VR虚拟现实等比肩的热门技术之一，本身不是新技术，类似Ajax，可以说它是一种技术架构，所以我们从架构设计的角度谈谈区块链的技术实现。</p>
<p>实现数据的 来源可追、时间可查；</p>
<h1 id="区块链种类"><a href="#区块链种类" class="headerlink" title="区块链种类"></a>区块链种类</h1><ul>
<li><p>私有链</p>
</li>
<li><p>公有链</p>
</li>
<li><p>联盟链</p>
</li>
</ul>
<p>国际上目前区块链的应用主要还是数字货币，这是目标区块链最活跃的领域。</p>
<h1 id="建设目标"><a href="#建设目标" class="headerlink" title="建设目标"></a>建设目标</h1><p>2019 年 10 月，中共中央政治局第十八次集体学习强调，“要探 索‘区块链’在民生领域的运用，积极推动区块链技术在教育、就业、 养老、精准脱贫、医疗健康、商品防伪、食品安全、公益、社会救助 等领域的应用，为人民群众提供更加智能、更加便捷、更加优质的公 共服务”。</p>
<h1 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h1><ul>
<li>全流程追溯 </li>
<li>智能供应链 </li>
<li>防伪追溯</li>
<li>可信检测</li>
<li>直播触达</li>
<li>数字营销</li>
<li>模式创新</li>
<li>电子合同</li>
<li>电子签名</li>
</ul>
<p>区块链应该是解决供应链之间存在的问题而生，为多条供应链搭建全球统一的认证平台</p>
<h2 id="区块链电子发票"><a href="#区块链电子发票" class="headerlink" title="区块链电子发票"></a>区块链电子发票</h2><h2 id="CA电子认证"><a href="#CA电子认证" class="headerlink" title="CA电子认证"></a>CA电子认证</h2><h2 id="冷链系统"><a href="#冷链系统" class="headerlink" title="冷链系统"></a>冷链系统</h2><h2 id="商标防伪追溯"><a href="#商标防伪追溯" class="headerlink" title="商标防伪追溯"></a>商标防伪追溯</h2><h2 id="药品溯源"><a href="#药品溯源" class="headerlink" title="药品溯源"></a>药品溯源</h2><p>药品生产厂家采集产线生产信息并与药品追溯码关联，将药品如 生产时间、批次、有效期等生产追溯信息实时写入上链，被授权的经 销商可以在其节点“共享”药品生产追溯信息。同理，经销商入库、 销售、出库、消费者触达等信息都按照此模式上链。患者可以通过扫 描药品上追溯码查验真伪以及药品生产、流程全过程信息。</p>
<h2 id="疫苗管理"><a href="#疫苗管理" class="headerlink" title="疫苗管理"></a>疫苗管理</h2><h1 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h1><h1 id="技术架构"><a href="#技术架构" class="headerlink" title="技术架构"></a>技术架构</h1><h1 id="待探索。。。"><a href="#待探索。。。" class="headerlink" title="待探索。。。"></a>待探索。。。</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/08/03/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka-kerberos/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/08/03/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka-kerberos/" class="post-title-link" itemprop="url">kafka之kerberos认证（release）</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-08-03 13:52:25" itemprop="dateCreated datePublished" datetime="2021-08-03T13:52:25+08:00">2021-08-03</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E4%B8%AD%E9%97%B4%E4%BB%B6/" itemprop="url" rel="index"><span itemprop="name">中间件</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/08/03/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka-kerberos/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/08/03/%E4%B8%AD%E9%97%B4%E4%BB%B6/kafka-kerberos/" class="cy_cmt_count" data-xid="2021/08/03/中间件/kafka-kerberos/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>在工作中接触kafka很多，但是kafka集成kerberos也是必不可少的，在实际项目中进行kerberos认证还是会有出现很多问题，所以仅以此篇记录kerberos认证相关步骤及问题点，方便以后使用。</p>
<h1 id="kerberos"><a href="#kerberos" class="headerlink" title="kerberos"></a>kerberos</h1><h2 id="基础概念"><a href="#基础概念" class="headerlink" title="基础概念"></a>基础概念</h2><p><strong>Kerberos</strong>是一种计算机网络授权协议，用来在非安全<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E7%BD%91%E7%BB%9C">网络</a>中，对个人通信以安全的手段进行身份认证。这个词又指<a target="_blank" rel="noopener" href="https://baike.baidu.com/item/%E9%BA%BB%E7%9C%81%E7%90%86%E5%B7%A5%E5%AD%A6%E9%99%A2">麻省理工学院</a>为这个协议开发的一套计算机软件。</p>
<p>Kerberos是一种客户端/服务端架构。</p>
<p>KDC：密钥分发中心（Key distribution Center），由三部分构成：Kerberos数据库、认证服务（Authentication service，AS）和票据授予服务（ticket-granting service，TGS）</p>
<p>principal：主体，Kerberos中的身份标识称为主体。</p>
<p>realm：域，确定了管理边界，所有主体均属于特定的Kerberos域。</p>
<p>主体和域的信息存储在Kerberos数据库中。</p>
<p>TGT：票据授予票据，AS认证成功后授予用户的一种特殊票据。</p>
<ul>
<li><em>关于keytab文件</em></li>
</ul>
<p>所有Kerberos服务器都需要一个keytab文件授权链接到KDC，默认文件名为：krb5.keytab。该文件是主机key的本地拷贝。</p>
<p>要为主机生成keytab文件，主机必须在Kerberos数据库中拥有一个principal。</p>
<h1 id="Kerberos安装（偏运维）"><a href="#Kerberos安装（偏运维）" class="headerlink" title="Kerberos安装（偏运维）"></a>Kerberos安装（偏运维）</h1><p>安装Kerberos KDC服务端</p>
<p>Kerberos属于主从结构，我们这里使用一台KDC服务器，3个客户端，另外集群中需要有一台服务器作为时间同步服务器安装NTP服务，Kerberos对NTP服务有依赖，必须进行安装。</p>
<p>操作步骤：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1. 编辑/etc/hosts文件保证主机名和IP地址正确对应</span><br><span class="line"></span><br><span class="line">2. 安装KDC</span><br><span class="line"></span><br><span class="line">3. 配置kdc.conf文件</span><br><span class="line"></span><br><span class="line">4. 配置kadm5.acl文件</span><br><span class="line"></span><br><span class="line">5. 配置krb5.conf文件</span><br><span class="line"></span><br><span class="line">6. 创建Kerberos数据库</span><br><span class="line"></span><br><span class="line">7. 测试Kerberos数据库</span><br><span class="line"></span><br><span class="line">8. 启动KDC服务</span><br><span class="line"></span><br><span class="line">9. 建立keytab文件</span><br><span class="line"></span><br><span class="line">10. 启动kadmind服务</span><br></pre></td></tr></table></figure>



<p>参考&amp;感谢：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_46474921/article/details/123515813">https://blog.csdn.net/weixin_46474921/article/details/123515813</a></p>
<h1 id="Kerberos基本使用"><a href="#Kerberos基本使用" class="headerlink" title="Kerberos基本使用"></a><a target="_blank" rel="noopener" href="https://www.cnblogs.com/wind-man/p/14143882.html">Kerberos基本使用</a></h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">创建用户</span><br><span class="line"></span><br><span class="line">kadmin.local</span><br><span class="line"></span><br><span class="line">addprinc confluent@BIGDATA.COM</span><br><span class="line"></span><br><span class="line">或</span><br><span class="line"></span><br><span class="line">kadmin.local -q &quot;addprinc confluent@BIGDATA.COM&quot;</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">导出keytab文件</span><br><span class="line"></span><br><span class="line">kadmin.local</span><br><span class="line"></span><br><span class="line">xst -k /etc/security/keytabs/confluent.keytab confluent@BIGDATA.COM</span><br><span class="line"></span><br><span class="line">xst -k /etc/security/keytabs/confluent.keytab -norandkey confluent@BIGDATA.COM</span><br><span class="line"></span><br><span class="line">或者</span><br><span class="line"></span><br><span class="line">kadmin.local -q &quot;xst -k /etc/security/keytabs/confluent.keytab confluent@BIGDATA.COM&quot;</span><br><span class="line"></span><br><span class="line">kadmin.local -q &quot; xst -k /etc/security/keytabs/confluent.keytab -norandkey confluent@BIGDATA.COM&quot;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">使用</span><br><span class="line"></span><br><span class="line">kinit -kt /etc/security/keytabs/confluent.keytab  confluent@BIGDATA.COM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">查看</span><br><span class="line"></span><br><span class="line">klist</span><br></pre></td></tr></table></figure>



<h1 id="Kerberos协议的组成角色"><a href="#Kerberos协议的组成角色" class="headerlink" title="Kerberos协议的组成角色"></a>Kerberos协议的组成角色</h1><p>在古希腊神话故事中，kerberos是一只具有三颗头颅的地狱恶犬，他守护在地狱之外，能够识别所有经此路过的亡灵，防止活着的入侵者闯入地狱。而真正的kerberos协议中也存在三个角色，分别是</p>
<ul>
<li><strong>客户端（client）</strong></li>
<li><strong>服务端（Server）</strong></li>
<li><strong>密钥分发中心（Key Distribution Center，KDC）</strong>，而密钥分发中心一般又分为<strong>AS（Authentication Server）</strong>、<strong>TGS（Ticket Granting Ticket）</strong></li>
</ul>
<h1 id="kerberos的认证原理"><a href="#kerberos的认证原理" class="headerlink" title="kerberos的认证原理"></a>kerberos的认证原理</h1><h1 id="客户端认证实际步骤"><a href="#客户端认证实际步骤" class="headerlink" title="客户端认证实际步骤"></a>客户端认证实际步骤</h1><p>以下操作前提需要先了解kafka在非Kerberos认证环境下的相关生产及消费的相关命令操作；</p>
<p>操作环境：liunx，kafka客户端</p>
<p>首先将认证文件放在规范的文件目录，例如：/opt/third/kafka/keytab 目录</p>
<ol>
<li>创建一个jaas.conf</li>
</ol>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建配置文件（主要前提会用到kafka.keytab文件，需先生成，例如文件路径：/opt/third/kafka/keytab/kafka.keytab）</span></span><br><span class="line"><span class="built_in">cd</span> /opt/third/kafka/keytab/</span><br><span class="line">vi jaas.conf</span><br><span class="line">KafkaClient &#123;</span><br><span class="line">   com.sun.security.auth.module.Krb5LoginModule required</span><br><span class="line">   useKeyTab=<span class="literal">true</span></span><br><span class="line">   keyTab=<span class="string">&quot;/opt/third/kafka/keytab/kafka.keytab&quot;</span>    <span class="comment"># keytab    文件路径，如果是ambari安装的，那么可以直接使用conf下的jaas.conf文件</span></span><br><span class="line">   principal=<span class="string">&quot;kafka@HADOOP.COM&quot;</span>;  <span class="comment">#认证的主题</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">Client &#123;</span><br><span class="line">  com.sun.security.auth.module.Krb5LoginModule required</span><br><span class="line">  useKeyTab=<span class="literal">true</span></span><br><span class="line">  storeKey=<span class="literal">true</span></span><br><span class="line">  keyTab=<span class="string">&quot;/opt/third/kafka/keytab/kafka.keytab&quot;</span></span><br><span class="line">  principal=<span class="string">&quot;kafka@HADOOP.COM&quot;</span>;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<p>以上步骤其实已经配置好了kerberos相关的配置文件，还需载入到系统环境变量中，注意，如果是root用户配置的，其他用户使用还需进行配置，除非通过该用户进行配置~/.bash_profile才行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">配置KAFKA_OPTS环境</span></span><br><span class="line">export KAFKA_OPTS=&quot;-Djava.security.auth.login.config=/opt/third/kafka/keytab/jaas.conf&quot;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>生产者认证配置</p>
<p>创建个配置文件(如producer.properties)，当然也可以配置在{KAFAK_HOME}/conf/producer.properties文件最后面，用于生产主题时指定的一些配置，如下：</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">security.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism=GSSAPI</span><br><span class="line">sasl.kerberos.service.name=kafka #这个指定kerberos的域名，不是主机的ip地址</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>消费认证配置</li>
</ol>
<p>创建个配置文件(如consumer.properties)，当然也可以配置在{KAFAK_HOME}/conf/consumer.properties文件最后面，用于消费主题时指定的一些配置，如下：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">security.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism=GSSAPI</span><br><span class="line">sasl.kerberos.service.name=kafka #这个指定kerberos的域名，不是主机的ip地址</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>kafka修改安装目录下<code>config/server.properties</code>配置</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">advertised.listeners=SASL_PLAINTEXT://IP:9092</span><br><span class="line">listeners=SASL_PLAINTEXT://IP:9092</span><br><span class="line">security.inter.broker.protocol=SASL_PLAINTEXT</span><br><span class="line">sasl.mechanism.inter.broker.protocol=GSSAPI</span><br><span class="line">sasl.enabled.mechanisms=GSSAPI</span><br><span class="line">sasl.kerberos.service.name=kafka   </span><br></pre></td></tr></table></figure>



<ol start="4">
<li>开始使用</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_"># </span><span class="language-bash">创建topic</span></span><br><span class="line">sh /opt/third/kafka/bin/kafka-topics.sh --create --zookeeper emr-node1:2181,emr-node2:2181,emr-node3:2181 --replication-factor 3 --partitions 1 --topic first_topic</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">生产</span></span><br><span class="line">sh /opt/third/kafka/bin/kafka-console-producer.sh --broker-list 192.168.0.85:9092,192.168.0.100:9092,192.168.0.204:9092 --topic first_topic --producer.config /opt/third/kafka/config/producer.properties</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_"># </span><span class="language-bash">消费</span></span><br><span class="line">sh /opt/third/kafka/bin/kafka-console-consumer.sh --topic first_topic --from-beginning --bootstrap-server 192.168.0.85:9092,192.168.0.100:9092,192.168.0.204:9092 --consumer.config /opt/third/kafka/config/consumer.properties </span><br></pre></td></tr></table></figure>

<p>第四步是kafka从topic创建、生产数据到消费数据全过程，这里每一步都会有日志输出，如果没有，说明消费可能已被消费，或者是消费者和生产者监听的topic不一致。</p>
<p>实际遇到的问题</p>
<p>（实际遇见的问题，由于两套kafka公用一个zk，生成的broker不一致，导致生产的数据无法被消费，这样的问题场景给开发人员用户造成很大的排出难点，会误以为是认证配置问题）</p>
<p>排查步骤:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看zookeeper中维护的brokerId</span></span><br><span class="line">sh /opt/third/kafka/bin/kafka-topics.sh --describe --zookeeper emr-node1:2181,emr-node2:2181,emr-node3:2181 --topic first</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">查看kafka中topic对应的brokerId</span></span><br><span class="line">sh /opt/third/kafka/bin/kafka-consumer-groups.sh  --bootstrap-server 192.168.0.85:9092,192.168.0.100:9092,192.168.0.204:9092 --list</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>排查发现topic对应的brokerId和zookeeper中维护的brokerId不一致，通过修改zookeeper的节点目录，删除zk维护节点数据（可能有权限问题），或者重装zookeeper可以解决该问题，主要原因是两个kafka连了同一个zk的/目录作为root目录数据有些冲突。所以换个root目录可以的（这个问题排查至少花费了3天时间。。。）</p>
<h1 id="springboot集成Kerberos认证"><a href="#springboot集成Kerberos认证" class="headerlink" title="springboot集成Kerberos认证"></a>springboot集成Kerberos认证</h1><p>其实Kerberos认证并没有想象的那么复杂，理清所需的认证文件及引入步骤就好了，其实springboot引入主要通过System.setProperty()设置环境属性。</p>
<p>创建kafka-client-jaas.conf、krb5.conf，配置文件中会用到kafka.keytab密钥文件。</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">KafkaServer &#123;</span><br><span class="line">   com.sun.security.auth.module.Krb5LoginModule required</span><br><span class="line">   useKeyTab=<span class="literal">true</span></span><br><span class="line">   keyTab=<span class="string">&quot;/opt/test/kafka/config/kerveros/kafka.keytab&quot;</span></span><br><span class="line">   storeKey=<span class="literal">true</span></span><br><span class="line">   useTicketCache=<span class="literal">false</span></span><br><span class="line">   serviceName=kafka</span><br><span class="line">   principal=<span class="string">&quot;kafka@HADOOP.COM&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">KafkaClient &#123;</span><br><span class="line">   com.sun.security.auth.module.Krb5LoginModule required</span><br><span class="line">   useKeyTab=<span class="literal">true</span></span><br><span class="line">   keyTab=<span class="string">&quot;/opt/test/kafka/config/kerveros/kafka.keytab&quot;</span></span><br><span class="line">   storeKey=<span class="literal">true</span></span><br><span class="line">   useTicketCache=<span class="literal">false</span></span><br><span class="line">   serviceName=kafka</span><br><span class="line">   principal=<span class="string">&quot;kafka@HADOOP.COM&quot;</span>;</span><br><span class="line">   username = <span class="string">&quot;user_abcd@GTMC.COM&quot;</span></span><br><span class="line">   password = <span class="string">&quot;user_abcd123$&quot;</span>;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Client &#123;</span><br><span class="line">        com.sun.security.auth.module.Krb5LoginModule required</span><br><span class="line">        useKeyTab=<span class="literal">true</span></span><br><span class="line">        keyTab=<span class="string">&quot;/opt/test/kafka/config/kerveros/kafka.keytab&quot;</span></span><br><span class="line">        storeKey=<span class="literal">true</span></span><br><span class="line">        useTicketCache=<span class="literal">false</span></span><br><span class="line">        principal=<span class="string">&quot;kafka@HADOOP.COM&quot;</span></span><br><span class="line">       serviceName=kafka;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>



<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">[libdefaults]</span><br><span class="line">  renew_lifetime = 7d</span><br><span class="line">  forwardable = <span class="literal">true</span></span><br><span class="line">  default_realm = HADOOP.COM</span><br><span class="line">  ticket_lifetime = 24h</span><br><span class="line">  dns_lookup_realm = <span class="literal">false</span></span><br><span class="line">  dns_lookup_kdc = <span class="literal">false</span></span><br><span class="line">  default_ccache_name = /tmp/krb5cc_%&#123;uid&#125;</span><br><span class="line">  <span class="comment">#default_tgs_enctypes = aes des3-cbc-sha1 rc4 des-cbc-md5</span></span><br><span class="line">  <span class="comment">#default_tkt_enctypes = aes des3-cbc-sha1 rc4 des-cbc-md5</span></span><br><span class="line"></span><br><span class="line">[logging]</span><br><span class="line">  default = FILE:/var/log/krb5kdc.<span class="built_in">log</span></span><br><span class="line">  admin_server = FILE:/var/log/kadmind.log</span><br><span class="line">  kdc = FILE:/var/log/krb5kdc.<span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">[realms]</span><br><span class="line">  HADOOP.COM = &#123;</span><br><span class="line">    admin_server = 192.168.10.36</span><br><span class="line">    kdc = 192.168.10.36</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h1 id="linux环境变量配置的6种方法"><a href="#linux环境变量配置的6种方法" class="headerlink" title="linux环境变量配置的6种方法"></a>linux<a target="_blank" rel="noopener" href="https://so.csdn.net/so/search?q=%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F&spm=1001.2101.3001.7020">环境变量</a>配置的6种方法</h1><h3 id="Linux读取环境变量"><a href="#Linux读取环境变量" class="headerlink" title="Linux读取环境变量"></a>Linux读取环境变量</h3><ul>
<li><code>export</code>命令显示当前系统定义的所有环境变量</li>
<li><code>echo $PATH</code>命令输出当前的<code>PATH</code>环境变量的值</li>
</ul>
<p>参考&amp;感谢，待迁移</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/shaoming314/article/details/123973828">https://blog.csdn.net/shaoming314/article/details/123973828</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/20/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E4%B9%8BOneData/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/20/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E4%B9%8BOneData/" class="post-title-link" itemprop="url">数据中台-OneData</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-20 20:21:22" itemprop="dateCreated datePublished" datetime="2021-07-20T20:21:22+08:00">2021-07-20</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0/" itemprop="url" rel="index"><span itemprop="name">数据中台</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/07/20/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E4%B9%8BOneData/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/07/20/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E4%B9%8BOneData/" class="cy_cmt_count" data-xid="2021/07/20/大数据/数据中台之OneData/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="OneData"><a href="#OneData" class="headerlink" title="OneData"></a>OneData</h1><p>OneId、OneService、OneModel</p>
<p><img src="/2021/07/20/%E5%A4%A7%E6%95%B0%E6%8D%AE/%E6%95%B0%E6%8D%AE%E4%B8%AD%E5%8F%B0%E4%B9%8BOneData/1.jpg"></p>
<p><strong>OneModel 统一数据构建和管理</strong><br>将指标定位细化为：原子指标、时间周期、修饰词（统计粒度、业务限定, etc），通过这些定义，设计出各类派生指标; 基于数据分层，设计出维度表、明细事实表、汇总事实表。</p>
<p><strong>OneService 统一数据服务</strong><br>OneService 指统一数据服务，即由数据中台提供统一的数据接入和数据查询服务。基于复用而不是复制数据的思想，能力包括：</p>
<ul>
<li>利用主题逻辑表屏蔽复杂物理表的主题式数据服务</li>
<li>一般查询+ OLAP 分析+在线服务的统一且多样化数据服务</li>
<li>屏蔽多种异构数据源的跨源数据服务</li>
</ul>
<p><strong>OneID 统一数据萃取</strong><br>基于统一的实体识别、连接和标签生产，实现数据通融，包括：</p>
<ul>
<li>ID自动化识别与连接</li>
<li>行为元素和行为规则</li>
<li>标签生产</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/07/14/linux_space/shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/14/linux_space/shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" class="post-title-link" itemprop="url">使用shell脚本自动化部署</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-07-14 20:18:18" itemprop="dateCreated datePublished" datetime="2021-07-14T20:18:18+08:00">2021-07-14</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Linux/" itemprop="url" rel="index"><span itemprop="name">Linux</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/07/14/linux_space/shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/07/14/linux_space/shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2/" class="cy_cmt_count" data-xid="2021/07/14/linux_space/shell脚本自动化部署/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>以下主要基于可运行的jar包，编写的shell部署脚本</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">#</span><span class="language-bash">!/bin/bash</span></span><br><span class="line">COPY_DIR=&quot;./bak&quot;</span><br><span class="line">DATE=$(date &quot;+%Y%m%d%H%M%S&quot;)</span><br><span class="line"></span><br><span class="line">if [ ! -d &quot;$COPY_DIR&quot; ];then</span><br><span class="line">       mkdir &quot;$COPY_DIR&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">jarName=$1</span><br><span class="line">jarNew=$(find $jarName*jar)</span><br><span class="line">jarHead=$(find $jarName*jar | awk -F &#x27;.&#x27; &#x27;&#123;print $1&#125;&#x27;)</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">echo</span> <span class="string">&quot;jarHead --- <span class="variable">$&#123;jarHead&#125;</span>&quot;</span></span></span><br><span class="line"></span><br><span class="line">echo &quot;deploy of ----$&#123;jarNew&#125;----&quot;</span><br><span class="line">sleep 3</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PID=`ps -aux | grep $jarHead | grep -v grep | grep -v deploy | awk &#x27;&#123;print $2&#125;&#x27;`</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash"><span class="built_in">unset</span> PID</span></span><br><span class="line">echo &quot; ---old PID：$&#123;PID&#125;--&quot;</span><br><span class="line"></span><br><span class="line">if [ -n &quot;$PID&quot; ];</span><br><span class="line">then</span><br><span class="line">echo &quot;kill old pid……&quot;</span><br><span class="line">sleep 2</span><br><span class="line">kill -9 $PID</span><br><span class="line">else</span><br><span class="line">echo &quot;no found old service……&quot;</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">echo &quot;start……&quot;</span><br><span class="line">sleep 1</span><br><span class="line"></span><br><span class="line">java -jar $jarNew --spring.profiles.active=test &gt; nohup.out  2&gt;&amp;1 &amp;</span><br><span class="line"><span class="meta prompt_">#</span><span class="language-bash">java -jar <span class="variable">$jarNew</span>  &gt; nohup.out  2&gt;&amp;1 &amp;</span></span><br><span class="line">cp $jarNew &quot;$COPY_DIR&quot;/&quot;$DATE&quot;$jarNew</span><br><span class="line"></span><br></pre></td></tr></table></figure>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/29/%E4%BD%BF%E7%94%A8Prometheus+Grafana%E7%9B%91%E6%8E%A7Flink%20on%20YARN%E4%BD%9C%E4%B8%9A/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/29/%E4%BD%BF%E7%94%A8Prometheus+Grafana%E7%9B%91%E6%8E%A7Flink%20on%20YARN%E4%BD%9C%E4%B8%9A/" class="post-title-link" itemprop="url">使用Prometheus+Grafana监控Flink on YARN作业</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-29 20:18:18" itemprop="dateCreated datePublished" datetime="2021-06-29T20:18:18+08:00">2021-06-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/06/29/%E4%BD%BF%E7%94%A8Prometheus+Grafana%E7%9B%91%E6%8E%A7Flink%20on%20YARN%E4%BD%9C%E4%B8%9A/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/06/29/%E4%BD%BF%E7%94%A8Prometheus+Grafana%E7%9B%91%E6%8E%A7Flink%20on%20YARN%E4%BD%9C%E4%B8%9A/" class="cy_cmt_count" data-xid="2021/06/29/使用Prometheus+Grafana监控Flink on YARN作业/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>任何语言以简单快速的方式搭建，由浅到深去学习，循序渐进，最后以高阶方案实践。</p>
<p>实时作业要保证7 x 24运行，除了要在业务逻辑和编码上下功夫之外，好的监控系统也是必不可少的。Flink支持多种汇报监控指标（metrics）的reporter，如JMX、SLF4J、InfluxDB、Prometheus等。</p>
<p><img src="/./images/image-20210727192920339.png" alt="image-20210727192920339"></p>
<p><img src="/./images/image-20210727192939626.png" alt="image-20210727192939626"></p>
<p><img src="/./images/image-20210727192957392.png" alt="image-20210727192957392"></p>
<h1 id="Prometheus搭建"><a href="#Prometheus搭建" class="headerlink" title="Prometheus搭建"></a>Prometheus搭建</h1><p>安装PushGateway及Prometheus</p>
<p>安装完成配置Prometheus对接PushGateway，配置prometheus.yml</p>
<p>配置flink对接PushGateway，配置flink-conf.yaml（需要将flink./opt/下的一个flink-metrics-prometheus-1.10.0.jar放到lib目录，不然flink无法向PushGateway传递数据）</p>
<p>Prometheus普罗米修斯，是一项SoundCloud开源的监控和报警解决方案，能够实现与当下最流行的Kubernetes无缝连接，使得普罗米修斯逐渐成为主流监控方案</p>
<p>macbook pro<br>注意brew环境是否完整及网络通透</p>
<p>brew install –build-from-source prometheus</p>
<p><a target="_blank" rel="noopener" href="https://prometheus.io/download/">https://prometheus.io/download/</a></p>
<h1 id="Grafana搭建"><a href="#Grafana搭建" class="headerlink" title="Grafana搭建"></a>Grafana搭建</h1><p>1、Grafana 下载&amp;安装</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget https://dl.grafana.com/oss/release/grafana-8.0.6-1.x86_64.rpm</span><br><span class="line">sudo yum install grafana-8.0.6-1.x86_64.rpm</span><br></pre></td></tr></table></figure>

<p>2、Grafana 启动&amp;状态查看</p>
<figure class="highlight shell"><figcaption><span>script</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl daemon-reload</span><br><span class="line">sudo systemctl start grafana-server</span><br><span class="line">sudo systemctl status grafana-server</span><br></pre></td></tr></table></figure>


<p>涉及linux、mac、windows安装<br>windows安装简单</p>
<p>启动成功后，浏览器打开服务器的3000端口，如：<a target="_blank" rel="noopener" href="http://ip:3000/">http://IP:3000/</a><br>默认账号密码：admin/admin（登录后提示修改密码）</p>
<p>在centos7上下载并安装Grafana<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/legend818/article/details/106140739/">https://blog.csdn.net/legend818/article/details/106140739/</a><br>![](使用Prometheus+Grafana监控Flink on YARN作业/monitor1.jpg)</p>
<h1 id="Flink-on-YARN"><a href="#Flink-on-YARN" class="headerlink" title="Flink on YARN"></a>Flink on YARN</h1><p>Flink支持多种部署方式local,standalone,yarn以及k8s</p>
<p>1、yarn session model<br>2、single job model</p>
<p>本文主要分5块内容讲解</p>
<pre><code>Flink解压安装；

Flink作业提交介绍；

Flink yarn session的部署；

Flink run 方式提交；

Flink HA部署；
</code></pre>
<p><a target="_blank" rel="noopener" href="https://flink.apache.org/downloads.html">https://flink.apache.org/downloads.html</a></p>
<p>#使用<br>Prometheus+PushGateway安装配置</p>
<p>用nohup的方式启动PushGateway和Prometheus。</p>
<p>编辑flink-conf.yaml，在其中加上Flink与PushGateway集成的参数。</p>
<p>Grafana默认跑在3000端口，用浏览器访问之，然后点击Create your first data source添加Prometheus数据源。</p>
<p>运行示例程序来产生一些监控数据。</p>
<figure class="highlight dockerfile"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">nc -l <span class="number">17777</span></span><br><span class="line"> </span><br><span class="line">/opt/flink-<span class="number">1.9</span>.<span class="number">0</span>/bin/flink <span class="keyword">run</span><span class="language-bash"> \</span></span><br><span class="line"><span class="language-bash">--detached \</span></span><br><span class="line"><span class="language-bash">--jobmanager yarn-cluster \</span></span><br><span class="line"><span class="language-bash">--yarnname <span class="string">&quot;example-socket-window-wordcount&quot;</span> \</span></span><br><span class="line"><span class="language-bash">/opt/flink-1.9.0/examples/streaming/SocketWindowWordCount.jar \</span></span><br><span class="line"><span class="language-bash">--port 17777</span></span><br></pre></td></tr></table></figure>


<p>最后添加一个用于查看监控图表的dashboard。点击New Dashboard-&gt;Add Query按钮，就可以直接看到Flink下的各个metric，还可以添加多个metric。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://www.freesion.com/article/33301039103/">https://www.freesion.com/article/33301039103/</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zz-ksw/p/12938611.htmlhttps://www.cnblogs.com/zz-ksw/p/12938611.html">https://www.cnblogs.com/zz-ksw/p/12938611.htmlhttps://www.cnblogs.com/zz-ksw/p/12938611.html</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/29/flink_space/flink%20on%20yarn/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/29/flink_space/flink%20on%20yarn/" class="post-title-link" itemprop="url">Flink On Yarn</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-29 20:18:18" itemprop="dateCreated datePublished" datetime="2021-06-29T20:18:18+08:00">2021-06-29</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-24 14:05:39" itemprop="dateModified" datetime="2024-05-24T14:05:39+08:00">2024-05-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/06/29/flink_space/flink%20on%20yarn/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/06/29/flink_space/flink%20on%20yarn/" class="cy_cmt_count" data-xid="2021/06/29/flink_space/flink on yarn/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>flink on yarn<br><img src="/2021/06/29/flink_space/flink%20on%20yarn/flinkOnYarn.jpg"><br>![](flink on yarn_files/1.jpg)<br>前提条件：需先安装zookeeper与hadoop</p>
<p>zookeeper安装</p>
<p>hadoop安装</p>
<h1 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h1><p>机器配置<br>3台 linux centos7（虚拟机即可）<br>修改主机名、固定ip<br>免密<br>安装jdk</p>
<ul>
<li>hadoop1: 4g内存 2核 80g硬盘 作为master节点</li>
<li>hadoop2 1g内存 1核 8g硬盘 作为slave节点</li>
<li>hadoop3: 1g内存 1核 8g硬盘 作为slave节点</li>
</ul>
<h2 id="免密（3步）"><a href="#免密（3步）" class="headerlink" title="免密（3步）"></a>免密（3步）</h2><p>生成密钥<br>ssh-keygen</p>
<p>验证密钥<br>cd ~/.ssh/</p>
<p>将公钥传到目标服务器即可<br>ssh-copy-id -i ~/.ssh/id_rsa.pub root@ip</p>
<ol>
<li>下载解压<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O http://apache.mirrors.hoobly.com/flink/flink-1.10.0/flink-1.10.0-bin-scala_2.12.tgz</span><br></pre></td></tr></table></figure></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">scp flink-1.10.0-bin-scala_2.12.tgz root@hadoop2:`pwd`</span><br><span class="line">scp flink-1.10.0-bin-scala_2.12.tgz root@hadoop3:`pwd`</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar zxvf flink-1.10.0-bin-scala_2.12.tgz</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ol start="2">
<li>JobManager高可用配置</li>
</ol>
<p>(1)yarn-site.xml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;property&gt;</span><br><span class="line">  &lt;name&gt;yarn.resourcemanager.am.max-attempts&lt;/name&gt;</span><br><span class="line">  &lt;value&gt;4&lt;/value&gt;</span><br><span class="line">  &lt;description&gt;</span><br><span class="line">    The maximum number of application master execution attempts.</span><br><span class="line">  &lt;/description&gt;</span><br><span class="line">&lt;/property&gt;</span><br></pre></td></tr></table></figure>
<p>(2)flink配置文件flink-conf.yaml</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">high-availability: zookeeper</span><br><span class="line">high-availability.zookeeper.quorum: hadoop1:2181,hadoop2:2181,hadoop3:2181</span><br><span class="line">high-availability.storageDir: hdfs:///flink/recovery</span><br><span class="line">high-availability.zookeeper.path.root: /flink</span><br><span class="line">yarn.application-attempts: 10</span><br></pre></td></tr></table></figure>
<p>(3)添加flink环境变量/etc/profile</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#flink环境变量配置</span><br><span class="line">export FLINK_HOME=/soft/flink/flink-1.10.0</span><br><span class="line">export PATH=$PATH:$FLINK_HOME/bin</span><br><span class="line"></span><br><span class="line">#flink on yarn配置</span><br><span class="line">HADOOP_CONF_DIR=$HADOOP_HOME</span><br><span class="line">export HADOOP_CLASSPATH=&#x27;hadoop classpath&#x27;</span><br></pre></td></tr></table></figure>

<p>参考：<br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/hxuhongming/p/12873010.html">https://www.cnblogs.com/hxuhongming/p/12873010.html</a></p>
<h1 id="Flink1-11-2-On-Yarn安装部署参考"><a href="#Flink1-11-2-On-Yarn安装部署参考" class="headerlink" title="Flink1.11.2 On Yarn安装部署参考"></a>Flink1.11.2 On Yarn安装部署参考</h1><p>flink-conf.yaml<br>masters<br>slaves<br>zoo.cfg</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Joe_circle/article/details/110188604">https://blog.csdn.net/Joe_circle/article/details/110188604</a></p>
<p>#测试<br>启动监听客户端端口<br>nc -lk 8888<br>（yum install -y nc）<br>启动flink的自带demo<br>bin/flink run examples/streaming/SocketWindowWordCount.jar –port 8888<br>启动日志监控<br>集群</p>
<p>##提交Flink任务到yarn的两种方式</p>
<ul>
<li>第一种yarn seesion(Start a long-running Flink cluster on YARN)这种方式需要先启动集群，然后在提交作业，接着会向yarn申请一块空间后，资源永远保持不变。如果资源满了，下一个作业就无法提交，只能等到yarn中的其中一个作业执行完成后，释放了资源，那下一个作业才会正常提交.这种方式资源被限制在session中，不能超过，比较适合特定的运行环境或者测试环境。</li>
</ul>
<p>启动后查看hadoop<br>启动集群<br>启动一个session</p>
<ul>
<li>第二种Flink run直接在YARN上提交运行Flink作业(Run a Flink job on YARN)，这种方式的好处是一个任务会对应一个job,即没提交一个作业会根据自身的情况，向yarn申请资源，直到作业执行完成，并不会影响下一个作业的正常运行，除非是yarn上面没有任何资源的情况下。一般生产环境是采用此种方式运行。这种方式就需要确保集群资源足够。</li>
</ul>
<p>启动后查看hadoop，yarn的web监控页面<br><img src="/2021/06/29/flink_space/flink%20on%20yarn/ha.jpg"><br>参考：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/asker009/p/11327533.html">https://www.cnblogs.com/asker009/p/11327533.html</a></p>
<p>#yarn<br>yarn是一个资源管理与调度平台，不仅hadoop跑在上面，flink也可以直接向yarn申请资源并运行上去</p>
<p>观察任务</p>
<p>命令行可以确认一下yarn任务创建成功：</p>
<pre><code>yarn application -list
</code></pre>
<p>杀死任务</p>
<p>如果想停止任务，直接向yarn杀死整个任务即可。</p>
<pre><code>yarn application -kill 进程ID
</code></pre>
<p><img src="/2021/06/29/flink_space/flink%20on%20yarn/1.jpg"><br><a target="_blank" rel="noopener" href="https://www.cnblogs.com/frankdeng/p/9400627.html">https://www.cnblogs.com/frankdeng/p/9400627.html</a></p>
<p>#疑问点？<br>flink启动后，提交job异常，发现是jdk版本问题，flink版本和jdk版本关系？</p>
<p> Sum of configured JVM Metaspace (96.000mb (100663296 bytes)) and JVM Overhead (192.000mb (201326592 bytes)) exceed configured Total Process Memory (64.000mb (67108864 bytes)).</p>
<h1 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h1><p>java.lang.NoClassDefFoundError: org/apache/hadoop/yarn/exceptions/YarnException问题可能缺少jar包<br>解决方法<br>cp $HADOOP_HOME/share/hadoop/yarn/hadoop-yarn-api* $FLINK_HOME/lib</p>
<p><a target="_blank" rel="noopener" href="https://yuchi.blog.csdn.net/article/details/106586942">https://yuchi.blog.csdn.net/article/details/106586942</a></p>
<p>java.lang.NoClassDefFoundError: org/apache/hadoop/fs/Path</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/19/flink_space/flink%20on%20k8s/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/19/flink_space/flink%20on%20k8s/" class="post-title-link" itemprop="url">Flink on k8s</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-19 22:16:38" itemprop="dateCreated datePublished" datetime="2021-06-19T22:16:38+08:00">2021-06-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-24 14:05:39" itemprop="dateModified" datetime="2024-05-24T14:05:39+08:00">2024-05-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/06/19/flink_space/flink%20on%20k8s/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/06/19/flink_space/flink%20on%20k8s/" class="cy_cmt_count" data-xid="2021/06/19/flink_space/flink on k8s/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>flink on k8s   </p>
<pre><code>1. Mac 安装 Docker
2. Minikube 搭建 Kubernetes 实验环境
3. Flink 实时处理 demo
4. 构建 Docker 容器镜像
5. 部署 JobManager
6. 部署 TaskManager
</code></pre>
<p>以 flink:1.8.1-scala_2.12 作为基础镜像，编写新的 Dockerfile，将打包好的任务 jar 包放置进去。此外，新版 flink 已将 hadoop 依赖从官方发行版本中剥离，因此在打包镜像的时候也要包含进去。<br>Hadoop jar 下载：flink-shaded-hadoop-2-uber-2.8.3-7.0.jar</p>
<p>参考：<br><a target="_blank" rel="noopener" href="https://blog.csdn.net/a1240466196/article/details/108881720">https://blog.csdn.net/a1240466196/article/details/108881720</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/06/flink_space/flink-%E5%9F%BA%E4%BA%8EFlink%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/06/flink_space/flink-%E5%9F%BA%E4%BA%8EFlink%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93/" class="post-title-link" itemprop="url">基于Flink构建实时数仓</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-06 20:28:36" itemprop="dateCreated datePublished" datetime="2021-06-06T20:28:36+08:00">2021-06-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2024-05-24 14:09:55" itemprop="dateModified" datetime="2024-05-24T14:09:55+08:00">2024-05-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%A4%A7%E6%95%B0%E6%8D%AE/" itemprop="url" rel="index"><span itemprop="name">大数据</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/06/06/flink_space/flink-%E5%9F%BA%E4%BA%8EFlink%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/06/06/flink_space/flink-%E5%9F%BA%E4%BA%8EFlink%E6%9E%84%E5%BB%BA%E5%AE%9E%E6%97%B6%E6%95%B0%E4%BB%93/" class="cy_cmt_count" data-xid="2021/06/06/flink_space/flink-基于Flink构建实时数仓/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>任何语言以简单快速的方式搭建，由浅到深去学习，循序渐进，最后以高阶方案实践。</p>
<p>基于Flink构建实时数仓</p>
<h1 id="技术栈"><a href="#技术栈" class="headerlink" title="技术栈"></a>技术栈</h1><h1 id="数据采集（将数据接入ODS层）"><a href="#数据采集（将数据接入ODS层）" class="headerlink" title="数据采集（将数据接入ODS层）"></a>数据采集（将数据接入ODS层）</h1><h2 id="用户行为数据采集"><a href="#用户行为数据采集" class="headerlink" title="用户行为数据采集"></a>用户行为数据采集</h2><h2 id="业务数据采集"><a href="#业务数据采集" class="headerlink" title="业务数据采集"></a>业务数据采集</h2><h1 id="Flink-CDC"><a href="#Flink-CDC" class="headerlink" title="Flink CDC"></a>Flink CDC</h1><p>CDC,Change Data Capture,变更数据获取的简称，使用CDC我们可以监控数据库中已提交的更改（包括INSERT,DELETE,UPDATE等）并将这些更改发送到下游，供下游使用。</p>
<h2 id="Flink-CDC种类"><a href="#Flink-CDC种类" class="headerlink" title="Flink CDC种类"></a>Flink CDC种类</h2><ul>
<li>基于查询</li>
<li>基于binlog（推荐）</li>
</ul>
<ol>
<li>flink DataStream API</li>
</ol>
<p>缺点：需要自定义反序列化器（其实也灵活）<br>监听mysql数据表操作顺序（场景：mysql监控多库多表）</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">1.获取执行环境</span><br><span class="line">2.通过FlinkCDC构建SourceFunction并读取数据</span><br><span class="line">3.打印数据</span><br><span class="line">4.启动任务</span><br></pre></td></tr></table></figure>
<p>flink任务实际运行<br>1、flink集群先启动<br>2、通过命令启动flink jar包（相当于提交任务）</p>
<p>断点续传，积极ck</p>
<ol start="2">
<li>flink Table/SQL（场景：mysql监控单库单表）<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1.获取执行环境</span><br><span class="line">2.DDL方式简表</span><br><span class="line">3.查询数据</span><br><span class="line">4.将动态表转换为流</span><br><span class="line">5.启动任务</span><br></pre></td></tr></table></figure></li>
</ol>
<h2 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h2><ul>
<li><p>mysql监控多库多表（监控数据可以写入kafka进行处理）</p>
</li>
<li><p>qq登录日志，计算每个人连续登录的最大天数</p>
</li>
<li><p>flink CDC与Maxwell、Canal</p>
</li>
<li><p>Maxwell（模仿数据库主从复制）实现监控抓取数据（flink实现原理一样）</p>
</li>
<li><p>Canal （阿里巴巴异地机房数据同步）</p>
<h1 id="Flink-CDC-自定义反序列化器"><a href="#Flink-CDC-自定义反序列化器" class="headerlink" title="Flink CDC 自定义反序列化器"></a>Flink CDC 自定义反序列化器</h1><p>例如在使用flink进行日志采集中，涉及数据格式问题无法解析，下游无法处理。<br>通过自定义反序列化器修改数据结构格式，可调整为Json格式进行传输，下游处理就很方便了。</p>
<h1 id="数仓搭建"><a href="#数仓搭建" class="headerlink" title="数仓搭建"></a>数仓搭建</h1><p>##数仓环境搭建<br>实时数据分层（离线数仓还有DWT-历史累积数据层）：<br>ODS（原始数据层）、DWD（明细数据层）、DWM（数据主题层）、DWS（服务数据层）、ADS（数据应用层）<br>###Hive环境搭建</p>
</li>
<li><p>数据管理<br>Hive（数仓核心）</p>
</li>
<li><p>数据计算<br>Hive on Spark（HQL语法，推荐）<br>Spark on Hive（Spark SQL语法，兼容低，性能差些）</p>
</li>
</ul>
<h1 id="DWD"><a href="#DWD" class="headerlink" title="DWD"></a>DWD</h1><p>DWD（Kafka）事实表 &amp; DIM（HBase）维度表</p>
<ul>
<li><p>行为数据处理<br>//数据流：web/app-&gt;Nginx-&gt;springboot-&gt;kafka(ods)-&gt;flinkApp-&gt;Kafka(dwd)<br>//模拟：mocklog-&gt;Nginx-logger.sh-&gt;Kafka(zk)-BaseLogApp-Kafka</p>
</li>
<li><p>业务数据处理<br>新增了业务表怎么办呢？<br>动态分流（zk监控即通知、mysql存储配置、mysql使用广播流（推荐）</p>
<h2 id="根据不同主题-指标"><a href="#根据不同主题-指标" class="headerlink" title="根据不同主题/指标"></a>根据不同主题/指标</h2><p>统计订单GMV<br>根据业务数据拆分不同个topic</p>
</li>
</ul>
<h1 id="DWM"><a href="#DWM" class="headerlink" title="DWM"></a>DWM</h1><ul>
<li>实际需求场景</li>
</ul>
<h2 id="UV（DAU）日活"><a href="#UV（DAU）日活" class="headerlink" title="UV（DAU）日活"></a>UV（DAU）日活</h2><h2 id="网站跳出明细"><a href="#网站跳出明细" class="headerlink" title="网站跳出明细"></a>网站跳出明细</h2><h2 id="订单宽表"><a href="#订单宽表" class="headerlink" title="订单宽表"></a>订单宽表</h2><p>宽表会涉及很多维度表</p>
<p>事实表：订单主表、订单明细表（双流join）<br>维度表：用户表、地区表、商品表</p>
<ul>
<li>flink join<br>window join<br>interval join</li>
</ul>
<h1 id="DWS"><a href="#DWS" class="headerlink" title="DWS"></a>DWS</h1><p>场景：关键字主题表统计</p>
<h1 id="ADS"><a href="#ADS" class="headerlink" title="ADS"></a>ADS</h1><h1 id="ClickHouse（俄罗斯Yandex于2016年开眼的列式存储数据库DBMS）"><a href="#ClickHouse（俄罗斯Yandex于2016年开眼的列式存储数据库DBMS）" class="headerlink" title="ClickHouse（俄罗斯Yandex于2016年开眼的列式存储数据库DBMS）"></a>ClickHouse（俄罗斯Yandex于2016年开眼的列式存储数据库DBMS）</h1><p>擅长于聚合操作<br>高吞吐的写入操作</p>
<h1 id="实战。。。"><a href="#实战。。。" class="headerlink" title="实战。。。"></a>实战。。。</h1>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9B%BE%E6%95%B0%E6%8D%AEHugeGraph/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="Zane">
      <meta itemprop="description" content="不知生活，何来人生">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Zane’s Space">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9B%BE%E6%95%B0%E6%8D%AEHugeGraph/" class="post-title-link" itemprop="url">数据库-HugeGraph</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-06-06 20:08:08" itemprop="dateCreated datePublished" datetime="2021-06-06T20:08:08+08:00">2021-06-06</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2023-06-15 14:53:48" itemprop="dateModified" datetime="2023-06-15T14:53:48+08:00">2023-06-15</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" itemprop="url" rel="index"><span itemprop="name">数据库</span></a>
                </span>
            </span>

          
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Changyan：</span>
    
    
      <a title="changyan" href="/2021/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9B%BE%E6%95%B0%E6%8D%AEHugeGraph/#SOHUCS" itemprop="discussionUrl">
        <span id="url::http://example.com/2021/06/06/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93-%E5%9B%BE%E6%95%B0%E6%8D%AEHugeGraph/" class="cy_cmt_count" data-xid="2021/06/06/数据库/数据库-图数据HugeGraph/" itemprop="commentCount"></span>
      </a>
    
  </span>
  
  

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="HugeGraph"><a href="#HugeGraph" class="headerlink" title="HugeGraph"></a>HugeGraph</h1><p>图数据库：HugeGraph、Neo4j</p>
<p>知识图谱</p>
<p>用户关系</p>
<p>数据融合</p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><span class="space">&hellip;</span><a class="page-number" href="/page/22/">22</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Zane"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">Zane</p>
  <div class="site-description" itemprop="description">不知生活，何来人生</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">220</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">33</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">109</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/Zane56Git" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;Zane56Git" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>


  <div class="links-of-blogroll motion-element">
    <div class="links-of-blogroll-title"><i class="fa fa-link fa-fw"></i>
      Links
    </div>
    <ul class="links-of-blogroll-list">
        <li class="links-of-blogroll-item">
          <a href="https://www.zane56stars.xyz/" title="https:&#x2F;&#x2F;www.zane56stars.xyz&#x2F;" rel="noopener" target="_blank">zone</a>
        </li>
    </ul>
  </div>

      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zane</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://mist.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Mist</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>


  <script defer src="/lib/three/three.min.js"></script>
    <script defer src="/lib/three/three-waves.min.js"></script>


  















  

  

  <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cyvu6phQy"></script>


</body>
</html>
