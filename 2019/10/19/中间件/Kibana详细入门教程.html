<hr>
<p>title: Kibana详细入门教程（release）<br>tags:</p>
<ul>
<li>大数据</li>
<li>ELK<br>categories:</li>
<li>大数据<br>toc: true<br>date: 2018/1/19 0:18:18</li>
</ul>
<hr>
<p>ELK的运用主要在Kibana工具的使用。</p>
<h1 id="Kibana是什么"><a href="#Kibana是什么" class="headerlink" title="Kibana是什么"></a>Kibana是什么</h1><p>Kibana 是为 Elasticsearch设计的开源分析和可视化平台。你可以使用 Kibana 来搜索，查看存储在 Elasticsearch 索引中的数据并与之交互。</p>
<h1 id="场景"><a href="#场景" class="headerlink" title="场景"></a>场景</h1><p>假如我们的日志已经接入，那该如何让通过Kibana进行查看？</p>
<h1 id="如何加载自定义索引"><a href="#如何加载自定义索引" class="headerlink" title="如何加载自定义索引"></a>如何加载自定义索引</h1><h1 id="查询栏编写语句查询"><a href="#查询栏编写语句查询" class="headerlink" title="查询栏编写语句查询"></a>查询栏编写语句查询</h1><p>##搜索数据</p>
<p>#切换中文</p>
<p>#如何使用控制台<br>控制台插件提供一个用户界面来和 Elasticsearch 的 REST API 交互。控制台有两个主要部分： editor ，用来编写提交给 Elasticsearch 的请求； response 面板，用来展示请求结果的响应。在页面顶部的文本框中输入 Elasticsearch 服务器的地址。默认地址是：“localhost:9200”。<br>点击左侧栏的[Dev Tools]，可以看到如下界面，可以很方便地执行命令</p>
<pre><code class="shell"># 查看所有节点
GET _cat/nodes

# 查看book索引数据
GET book/_search
{
    &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;content&quot;: &quot;chenqionghe&quot;
    }
  }
}

# 添加一条数据
POST book/_doc 
{
  &quot;page&quot;:8,
  &quot;content&quot;: &quot;chenqionghe喜欢运动，绳命是如此的精彩，绳命是多么的辉煌&quot;
}

# 更新数据
PUT book/_doc/iSAz4XABrERdg9Ao0QZI
{
  &quot;page&quot;:8,
  &quot;content&quot;:&quot;chenqionghe喜欢运动，绳命是剁么的回晃；绳命是入刺的井猜&quot;
}

# 删除数据
POST book/_delete_by_query
{
  &quot;query&quot;: {
    &quot;match&quot;: {
      &quot;page&quot;: 8
    }
  }
}

# 批量插入数据
POST book/_bulk
{ &quot;index&quot;:{} }
{ &quot;page&quot;:22 , &quot;content&quot;: &quot;Adversity, steeling will strengthen body.逆境磨练意志，锻炼增强体魄。&quot;}
{ &quot;index&quot;:{} }
{ &quot;page&quot;:23 , &quot;content&quot;: &quot;Reading is to the mind, such as exercise is to the body.读书之于头脑，好比运动之于身体。&quot;}
{ &quot;index&quot;:{} }
{ &quot;page&quot;:24 , &quot;content&quot;: &quot;Years make you old, anti-aging.岁月催人老，运动抗衰老。&quot;}
{ &quot;index&quot;:{} }

</code></pre>
<p>参考：<br><a href="https://www.cnblogs.com/chenqionghe/p/12503181.html?utm_source=tuicool&amp;utm_medium=referral">https://www.cnblogs.com/chenqionghe/p/12503181.html?utm_source=tuicool&amp;utm_medium=referral</a></p>
<ul>
<li>创建查询</li>
</ul>
<p>在Discover界面的搜索栏输入要查询的字段。查询语法是基于Lucene的查询语法。允许布尔运算符、通配符和字段筛选。注意关键字要大写。如查询类型是http，且状态码是302。type: http AND http.code: 302。</p>
<ul>
<li>字符串查询</li>
</ul>
<p>查询可以包含一个或多个字或者短语。短语需要使用双引号引起来。如：”http”</p>
<ul>
<li>基于字段的查询</li>
</ul>
<p>只搜索特定的字段。</p>
<ul>
<li><p>正则表达式查询</p>
</li>
<li><p>返回查询</p>
</li>
</ul>
<p>允许一个字段值在某个区间。[] 包含该值，{}不包含。</p>
<ul>
<li>布尔查询</li>
</ul>
<p>布尔运算符（AND，OR，NOT）允许通过逻辑运算符组合多个子查询。</p>
<p>运算符AND/OR/NOT必须大写。</p>
<p>NOT type: mysql</p>
<p>mysql.method: SELECT AND mysql.size: [10000 TO *]</p>
<p>(mysql.method: INSERT OR mysql.method: UPDATE) AND responsetime: [30 TO *]</p>
<ul>
<li>创建过滤器</li>
</ul>
<p>可通过单击可视化中的元素进行筛选。<br>kibana支持正则表达式过滤器和表达式。</p>
<p><a href="http://www.ttlsa.com/elk/elk-kibana-query-and-filter/">http://www.ttlsa.com/elk/elk-kibana-query-and-filter/</a></p>
